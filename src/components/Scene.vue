<template>
  <a-scene>

    <assets></assets>

    <a-entity kinematic-body
              movement-controls
              position="-13 0 8.5">

      <a-entity camera
                look-controls="pointerLockEnabled: true"
                position="0 1.6 0">

        <a-text id="txt-score"
                :value="`Goals ${targetGoals} / ${targetsCount}`"
                align="center"
                anchor="center"
                color="#A83A21"
                font="mozillavr"
                position="0 0.6 -0.8"
                width="3"></a-text>

        <a-text id="txt-win"
                opacity="0"
                align="center"
                anchor="center"
                color="#ff4d00"
                font="mozillavr"
                position="0 0.025 -0.1"
                value="You win!"
                width="1"></a-text>

        <a-entity light="type: point;
                         angle: 40;
                         intensity: 1;
                         decay: 15;
                         distance: 100;
                         color: #fff2e6"
                  positon="0 1 0"></a-entity>

        <a-cursor postion="0 0 -0.9" color="#A83A21"></a-cursor>

      </a-entity>

    </a-entity>

    <labyrinth></labyrinth>

    <a-plane height="52"
             material="src: #grass;
                       repeat: 8 8;
                       normalMap: #grass-normal;
                       normalTextureRepeat: 8 8;
                       roughnessMap: #grass-roughness;
                       roughnessTextureRepeat: 8 8"
             position="0 0 -13"
             rotation="-90 0 0"
             static-body
             width="40"></a-plane>

    <a-plane height="52"
             material="src: #grass;
                       repeat: 8 8;
                       normalMap: #grass-normal;
                       normalTextureRepeat: 8 8;
                       roughnessMap: #grass-roughness;
                       roughnessTextureRepeat: 8 8"
             :position="`0 ${$constant('WALL_HEIGHT')} -13`"
             rotation="-90 0 0"
             scale="1 1 -1"
             width="40"></a-plane>

    <a-sky color="skyblue"></a-sky>
  </a-scene>
</template>

<script>
import 'aframe'
import 'aframe-physics-system/dist/aframe-physics-system';
import 'aframe-extras';

import {mapState} from 'vuex';

import Assets from "@/components/Assets";
import Labyrinth from "@/components/Labyrinth";

export default {
  name: 'Scene',
  components: {
    Assets,
    Labyrinth
  },
  computed: {
    ...mapState(['targetGoals', 'targetsCount']),
  }
}
</script>

<style>
</style>
